# 海洋数据预处理报告示例

**生成时间**: 2026-02-04 10:30:00
**数据集路径**: `/data/ocean/roms_dataset`

---

## 1. 数据集概览

### 1.1 基本信息

- **文件数量**: 365
- **动态文件**: 365
- **疑似静态文件**: 0

### 1.2 变量分类

- **动态变量** (4): `uo`, `vo`, `temp`, `salt`
- **静态变量** (4): `lon_rho`, `lat_rho`, `h`, `angle`
- **掩码变量** (4): `mask_rho`, `mask_u`, `mask_v`, `mask_psi`

### 1.3 变量详细信息

| 变量名 | 类别 | 形状 | 数据类型 | 单位 |
|--------|------|------|----------|------|
| `uo` | dynamic | [365, 680, 1440] | float32 | m/s |
| `vo` | dynamic | [365, 680, 1440] | float32 | m/s |
| `temp` | dynamic | [365, 680, 1440] | float32 | Celsius |
| `salt` | dynamic | [365, 680, 1440] | float32 | PSU |
| `lon_rho` | static | [680, 1440] | float64 | degrees_east |
| `lat_rho` | static | [680, 1440] | float64 | degrees_north |
| `h` | static | [680, 1440] | float32 | m |
| `angle` | static | [680, 1440] | float32 | radians |
| `mask_rho` | mask | [680, 1440] | float32 | - |
| `mask_u` | mask | [680, 1439] | float32 | - |
| `mask_v` | mask | [679, 1440] | float32 | - |
| `mask_psi` | mask | [679, 1439] | float32 | - |

## 2. 验证结果

### 2.1 张量约定验证

- **状态**: `pass`
- **研究变量**: `uo`, `vo`, `temp`, `salt`

**张量约定**:

- 动态变量形状: `[T, H, W]`
- 静态变量形状: `[H, W]`

## 3. 转换结果

### 3.1 数据集划分

- **训练集比例**: 0.7
- **验证集比例**: 0.15
- **测试集比例**: 0.15

### 3.2 裁剪信息

- **H 方向裁剪**: `0:680`
- **W 方向裁剪**: `0:1440`
- **下采样倍数**: 4

### 3.3 后置验证

- **Rule 1 (输出完整性)**: `pass`
- **Rule 2 (掩码不可变性)**: `pass`
- **Rule 3 (排序确定性)**: `pass`

### 3.4 输出文件

- **总文件数**: 16

## 4. 质量指标

### 4.1 指标概览

- **下采样倍数**: 4

### 4.2 Train 数据集

| 变量名 | SSIM ↑ | Relative L2 ↓ | MSE ↓ | RMSE ↓ |
|--------|--------|----------------|-------|--------|
| `uo` | 0.9234 | 0.0456 | 0.000123 | 0.0111 |
| `vo` | 0.9187 | 0.0489 | 0.000145 | 0.0120 |
| `temp` | 0.9512 | 0.0234 | 0.000089 | 0.0094 |
| `salt` | 0.9445 | 0.0312 | 0.000098 | 0.0099 |

### 4.3 Valid 数据集

| 变量名 | SSIM ↑ | Relative L2 ↓ | MSE ↓ | RMSE ↓ |
|--------|--------|----------------|-------|--------|
| `uo` | 0.9201 | 0.0478 | 0.000131 | 0.0114 |
| `vo` | 0.9156 | 0.0501 | 0.000152 | 0.0123 |
| `temp` | 0.9489 | 0.0245 | 0.000092 | 0.0096 |
| `salt` | 0.9423 | 0.0325 | 0.000103 | 0.0101 |

### 4.4 Test 数据集

| 变量名 | SSIM ↑ | Relative L2 ↓ | MSE ↓ | RMSE ↓ |
|--------|--------|----------------|-------|--------|
| `uo` | 0.9189 | 0.0492 | 0.000138 | 0.0117 |
| `vo` | 0.9143 | 0.0515 | 0.000159 | 0.0126 |
| `temp` | 0.9476 | 0.0256 | 0.000095 | 0.0097 |
| `salt` | 0.9411 | 0.0338 | 0.000108 | 0.0104 |

**指标说明**:

- **SSIM** (结构相似性): 0~1，越接近 1 表示结构越相似
- **Relative L2**: 相对 L2 误差，越小越好（HR 作为基准）
- **MSE**: 均方误差，越小越好
- **RMSE**: 均方根误差，越小越好

## 5. 可视化对比

### 5.1 Train 数据集

#### uo

![uo](visualisation_data_process/train/uo.png)

#### vo

![vo](visualisation_data_process/train/vo.png)

#### temp

![temp](visualisation_data_process/train/temp.png)

#### salt

![salt](visualisation_data_process/train/salt.png)

## 6. 分析和建议

✅ **数据质量良好**: 所有指标均在正常范围内，数据预处理成功完成。

**关键发现**:

1. **SSIM 指标**: 所有变量的 SSIM 值均在 0.91-0.95 之间，表明下采样后的数据保持了良好的结构相似性。其中 `temp` 变量表现最佳（SSIM=0.95），`vo` 变量略低（SSIM=0.92）。

2. **Relative L2 误差**: 所有变量的相对误差均小于 5%，符合预期。`temp` 变量的误差最小（2.3%），说明温度场的下采样效果最好。

3. **数据集划分**: 训练集/验证集/测试集按 7:1.5:1.5 划分，共 365 个时间步，训练集包含 255 个时间步，数据量充足。

4. **后置验证**: 所有验证规则（Rule 1/2/3）均通过，确保了数据的完整性、掩码不可变性和排序确定性。

**建议**:

- 当前数据质量良好，可以直接用于超分辨率模型训练
- 如需进一步提升质量，可以考虑使用双三次插值（bicubic）替代双线性插值（bilinear）
- 建议在训练过程中监控各变量的损失函数，确保模型对所有变量都有良好的学习效果

## 7. 总结

本次预处理共处理 **365** 个文件，包含 **4** 个动态变量。
验证状态: `pass`

数据质量指标已计算完成，详见第 4 节。

---

*报告由 Ocean-Agent-SDK 自动生成*
